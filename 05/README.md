# 화면을 개발하기 위한 기본 지식과 팁 - 템플릿 & 프로젝트 구성

## 05-1 뷰 템플릿
### 뷰 템플릿이란?
뷰의 템플릿(Template)은 HTML, CSS 등의 마크업 속성과 뷰 인스턴스에서 정의한 데이터 및 로직들을 연결하여 사용자가 브라우저에서 볼 수 있는 형태의 HTML로 변환해 주는 속성입니다.  

템플릿 속성을 사용하는 방법은 두 가지로, **첫 번재는 ES5에서 뷰 인스턴스의 template 속성을 활용하는 방법**입니다. 지금까지 예제에서 주로 사용하는 template: ```<p>Hello {{ message }}</p>```와 같은 코드가 템플릿을 의미합니다.

템플릿 속성에 대해 한 가지 알아둘 특징이 있습니다. 사용자가 볼 수는 없지만 라이브러리 내부적으로 template 속성에서 정의한 마크업 + 뷰 데이터를 가상 돔 기반의 render() 함수로 변환합니다.  
변환된 render() 함수는 최종적으로 사용자가 볼 수 있게 화면을 그리는 역할을 합니다. 그리고 변환 과정에서 뷰의 반응성(Reactivity)이 화면에 더해집니다.

**두 번째는 이 책 후반부에서 배우게 될 싱글 파일 컴포넌트 체계의 ```<template>``` 코드를 활용하는 방법**입니다. ES5 문법은 지금까지 계속 실습해 왔기 때문에 익숙하겠지만 싱글 파일 컴포넌트 체계의 ```<template>``` 코드 형식은 아직 낯설 것입니다.

템플릿에서 사용하는 뷰의 속성과 문법은 아래와 같습니다.
- 데이터 바인딩
- 자바스크립트 표현식
- 디렉티브
- 이벤트 처리
- 고급 템플릿 기법

### 데이터 바인딩
데이터 바인딩(Data Binding)은 HTML 화면 요소를 뷰 인스턴스의 데이터와 연결하는 것을 의미합니다. 주요 문법으로는 ```{{ }}``` 문법과 v-bind 속성이 있습니다.

#### ```{{ }}``` - 콧수염 괄호
```{{ }}```는 뷰 인스턴스의 데이터를 HTML 태그에 연결하는 가장 기본적인 텍스트 삽입 방식입니다. ```{{ }}```는 모양이 콧수염과 비슷하다고 하여 콧수염 괄호라고 부릅니다. 뷰뿐만 아니라 다른 언어나 프레임워크에서도 자주 사용되는 템플릿 문법(template syntax)입니다. 앞의 예제에서 계속 다뤘기 때문에 많이 익숙하겠지만 간단히 형식을 정리하면 다음과 같습니다.

```html
<div id="app">  
    {{ message }}
</div>
<script>
    new Vue({
        el: '#app',
        data: {
            message: 'Hello Vue.js!'
        }
    });
</script>
```

data 속성의 message 속성 값인 Hello Vue.js!를 ```<div>``` 태그 안의 {{ message }}에 연결하여 화면에 나타내는 코드입니다. 만약 data 속성의 message 값이 바뀌면 뷰 반응성에 의해 화면이 자동으로 갱신됩니다.

뷰 데이터가 변경되어도 값을 바꾸고 싶지 않다면 오른쪽과 같이 v-once 속성을 사용합니다.
```html
<div id="app">
    {{ message }}
</div>
```

#### v-bind 
v-bind는 아이디, 클래스, 스타일 등의 HTML 속성(attributes)값에 뷰 데이터 값을 연결할 때 사용하는 데이터 연결 방식입니다. 형식은 v-bind속성으로 지정할 HTML속성이나 props속성 앞에 접두사를 붙여줍니다.

[**v-bind 예제**](./05-1/index.html)

HTML의 기본 속성인 id, class, style의 앞에 ```v-bind:```를 붙여서 뷰 인스턴스에 정의한 데이터 속성과 연결하여 화면에 나타내는 예제입니다.

실행 결과 화면을 보면 데이터 속성의 idA, classA, styleA값이 화면의 요소에 각각 연결되어 나타난 것을 확인할 수 있습니다. 특히 styleA속성은 스타일 값이 적용되면서 바로 화면에 반영되어 나타납니다.

추가로 ```v-bind:```문법을 :로 간소화할 수 있습니다. 예를 들어, ```v-bind:id```와 ```:id```는 같은 동작을 합니다. 약식 문법을 사용할 때는 기본 문법과 약식 문법을 혼용해서 사용하지 않는 것이 좋습니다. 또한 뷰 코드가 전반적으로 v-접두사를 붙이는 형태이기 때문에 가급적 v-bind속성을 이용하는 것이 기존 HTML 문법과 구분도 되고 다른 사람이 코드를 파악하기도 쉽습니다.

### 자바스크립트 표현식
뷰의 템플릿에서도 자바스크립트 표현식을 쓸 수 있습니다. 데이터 바인딩 방법 중 하나인 ```{{ }}``` 안에 자바스크립트 표현식을 넣으면 됩니다. 이전의 예제들은 단순하게 ```{{ }}```로 data 속성의 message만 연결하여 표현하였습니다. 다음 예제 코드에서는 message 값을 화면에 나타날 때 간단한 자바스크립트 연산을 이용하여 다양한 결과를 표현합니다.

[**자바스크립트 표현식 예제**](./05-2/index.html)

첫 번째 ```<p>``` 태그는 message의 값 Hello Vue.js!를 그대로 출력합니다.  
두 번째 ```<p>``` 태그는 message의 값에 문자열 !!!를 추가하여 출력하기 때문에 Hello Vue.js!!!가 출력됩니다.  
세 번째 ```<p>``` 태그는 문자열 Hello Vue.js!의 순서를 바꿔 !sj.euV olleH로 출력합니다. 문자열 순서를 바꾸기 위해 자바스킈립트 내장 API를 사용하였습니다.

#### 자바스크립트 표현식에서 주의할 점
자바스크립트 표현식을 사용할 때 주의할 점이 두 가지 있습니다.  
첫째, 자바스크립트의 선언문과 분기 구문은 사용할 수 없습니다.  
둘째, 복잡한 연산은 인스턴스 안에서 처리하고 화면에는 간단한 연산 결과만 표시해야 합니다.

[**자바스크립트 표현식 사용 시 주의할 점**](./05-3/index.html)

```{{ var a = 10; }}```은 자바스크립트 선언문이고, ```{{ if(true) {return 100} }}```은 분기 구문이므로 브라우저로 실행하면 오류가 발생합니다. **분기 구문과 동일한 로직을 처리하고 싶으면 자바스크립트의 삼항 연산자를 사용합니다.** 따라서 ```{{ if (ture){return 100} }}```에 삼항 연산자를 적용한 ```{{ ture ? 100 : 0}}```으로 대체할 수 있습니다.

그리고 message의 텍스트 값을 역순으로 변환하는 연산은 HTML 단에서 수행하지 않고, 자바스크립트 단에서 computed 속성을 이용하여 계산한 후 최종 결과 값만 표시합니다. 뷰에서 이러한 방식을 권하는 이유는 HTML에 최종적으로 표현될 값만 나타내고, 데이터의 기본 연산은 자바스크립트 단에서 함으로써 화면단 코드의 가독성을 높일 수 있기 때문입니다. 이렇게 되면 화면단 코드를 훨씬 빠르게 읽을 수 있어 화면의 UI 구조를 쉽게 파악할 수 있습니다.

반복적인 연산에 대해서는 미리 계산하여 저장해 놓고, 필요할 떄 바로 불러오는 캐싱(caching) 효과를 얻을 수 있습니다.

#### 디렉티브
뷰 디렉티브(Directive)란 HTML 태그 안에 v-접두사를 가지는 모든 속성들을 의미합니다. 앞에서 배운 v-bind 속성도 디렉티브에 해당됩니다. 디렉티브의 형식은 아래와 같습니다.

```html
<a v-if="flag">두잇 Vue.js</a>
```

위 ```<a>```태그는 뷰 인스턴스 데이터 속성에 정의된 flag 값에 따라 보이기도 하고 안 보이기도 합니다. flag 값이 참(ture)이면 '두잇 Vue.js' 텍스트가 화면에 보일 것이고, 값이 거짓(false)이면 ```<a>``` 전체가 표시되지 않아 텍스트가 화면에서 보이지 않습니다.

**디렉티브는 화면의 요소를 더 쉽게 조작하기 위해 사용하는 기능**입니다. 뷰의 데이터 값이 변경되었을 때 화면의 요소들이 리액티브(Reactive)하게 반응하여 변경된 데이터 값에 따라 갱신됩니다. 이런 식으로 화면의 요소를 직접 제어할 필요 없이 뷰의 디렉티브를 활용하여 화면 요소들을 조작할 수 있습니다.

![Vue.js Directive](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR1-I4Bi2bwZk7ZW_x4NdVuy0v7jRcM_fiFUg&usqp=CAU)

[**많이 사용되는 디렉티브 다루기**](./05-4/index.html)

1. ```v-if```: 분기 처리의 조건 값인 flag 값이 ture이므로 '두잇 Vue.js' 텍스트를 화면에 표시합니다.
2. ```v-for```: 뷰 데이터 systems는 android, ios, window의 총 3개의 값을 가지는 배열입니다. 이 배열의 요소 개수만큼 ```<li>``` 태그가 반복되어 ```{{ system }}```으로 각 요소의 값을 화면에 표시합니다.
3. ```v-show```: v-if와 마찬가지로 flag 값이 ture이므로 '두잇 Vue.js'를 화면에 표시합니다.
4. ```v-bind```: HTML 태그의 id 속성을 뷰 데이터에 선언한 uid 값과 연결하여 화면에 표시합니다.
5. ```v-on```: [경고 창 버튼]을 클릭했을 때 해당 이벤트를 감지하여 methods 속성에 선언한 popupAlert() 메서드를 수행합니다. 결과적으로 브라우저 기본 경고 창을 엽니다.

[경고 창 버튼]을 클릭해서 실제로 경고 창이 열리는지 확인합니다. 그리고 flag 값을 변경하고 크롬 개발자 도구로 화면 요소 검사 했을 때 ```<p>두잇 Vue.js</p>```에 어떤 변화가 있는지 확인해 보세요.

### 이벤트 처리 
웹 앱에서 사용자의 클릭이나 키보드 입력과 같은 이벤트를 처리하는 것은 당연합니다. 뷰 역시 화면에서 발생한 이벤트를 처리하기 위해 ```v-on``` 디렉티브와 methods 속성을 활용합니다.  
제이쿼리 못지않게 뷰도 이벤트 처리가 매우 간단합니다.

[**v-on 디렉티브 이용해 이벤트 처리하기**]

```<button>``` 태그에 ```v-on:click``` 디렉티브를 추가하여 [클릭] 버튼을 클릭하면 ```clickBtn()``` 메서드가 실행되도록 지정하였습니다. 따라서 [클릭] 버튼을 클릭하면 methods 속성의 ```clickBtn()``` 메서드에 정의한 ```alert()``` 내장 API가 실행됩니다.

